{% extends "layout.html" %}
{% block content %}
  <div class="bg-light p-5 rounded">
    <h1>Dashboard de Anal√≠tica de Cr√≠menes (Crime Analytics Dashboard)</h1>
    <p class="lead">Un resumen de los patrones de gravedad de cr√≠menes en NYC y el rendimiento del modelo predictivo. (A summary of crime severity patterns in NYC and the predictive model's performance.)</p>
  </div>

  <div class="row mt-4">
    <div class="col-md-6 mb-4">
      <div class="card text-center h-100">
        <div class="card-header fw-bold">{{ metric_name }}</div>
        <div class="card-body">
          <h1 class="card-title display-4">{{ model_metric }}</h1>
          <p class="card-text">Esta es una m√©trica m√°s robusta que la "Accuracy" para datasets desbalanceados. (This is a more robust metric than Accuracy for imbalanced datasets.)</p>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-4">
      <div class="card text-center h-100">
        <div class="card-header fw-bold">Total de Registros Analizados (Total Records Analyzed)</div>
        <div class="card-body">
          <h1 class="card-title display-4">{{ num_datos }}</h1>
          <p class="card-text">N√∫mero de denuncias despu√©s de la limpieza y preprocesamiento. (Number of complaints after cleaning and preprocessing.)</p>
        </div>
      </div>
    </div>
  </div>

  <hr class="my-4">

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header fw-bold">Distribuci√≥n de Tipos de Crimen (Distribution of Crime Types)</div>
        <div class="card-body">
          <img src="{{ plot1_url }}" class="img-fluid" alt="Distribuci√≥n de Cr√≠menes">
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header fw-bold">Cr√≠menes por D√≠a de la Semana (Crimes by Day of the Week)</div>
        <div class="card-body">
          <img src="{{ plot2_url }}" class="img-fluid" alt="Cr√≠menes por D√≠a">
        </div>
      </div>
    </div>
  </div>

  <hr class="my-4">

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header fw-bold text-white bg-danger">üö® Top 5 Lugares con M√°s Denuncias (Top 5 Locations by Complaint Volume)</div>
        <ul class="list-group list-group-flush">
          {% for place, count in most_dangerous.items() %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ place }}
              <span class="badge bg-danger rounded-pill">{{ count }} denuncias (complaints)</span>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header fw-bold text-white bg-success">‚úÖ Top 5 Lugares con Menos Denuncias (Top 5 Locations by Complaint Volume)</div>
        <ul class="list-group list-group-flush">
          {% for place, count in least_dangerous.items() %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ place }}
              <span class="badge bg-success rounded-pill">{{ count }} denuncias (complaints)</span>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
{% endblock %}