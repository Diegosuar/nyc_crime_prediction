{% extends "base.html" %}
{% block title %}Predicción de Arresto{% endblock %}
{% block content %}
<style>
    /* ... (los estilos se pueden quedar igual) ... */
</style>
<div class="form-container">
    <h1>¿Cuál es la probabilidad de un arresto?</h1>
    <form method="POST">
        <h2>Introduce los detalles de la denuncia:</h2>
        
        <label for="latitude">Latitud</label>
        <input type="number" step="any" name="latitude" required value="{{ input_values.latitude or '' }}">

        <label for="longitude">Longitud</label>
        <input type="number" step="any" name="longitude" required value="{{ input_values.longitude or '' }}">

        <label for="hour">Hora del Día (0-23)</label>
        <input type="number" name="hour" min="0" max="23" required value="{{ input_values.hour or '12' }}">

        <label for="month">Mes (1-12)</label> <input type="number" name="month" min="1" max="12" required value="{{ input_values.month or '10' }}">

        <label for="is_weekend">¿Es Fin de Semana?</label>
        <select name="is_weekend">
            <option value="0" {% if input_values.is_weekend == '0' %}selected{% endif %}>No (Lunes-Viernes)</option>
            <option value="1" {% if input_values.is_weekend == '1' %}selected{% endif %}>Sí (Sábado-Domingo)</option>
        </select>
        
        <label for="prem_typ_desc">Tipo de Lugar</label> <select name="prem_typ_desc">
            <option value="STREET" {% if input_values.prem_typ_desc == 'STREET' %}selected{% endif %}>STREET</option>
            <option value="RESIDENCE - APT. HOUSE" {% if input_values.prem_typ_desc == 'RESIDENCE - APT. HOUSE' %}selected{% endif %}>RESIDENCE - APT. HOUSE</option>
            <option value="RESIDENCE - HOUSE" {% if input_values.prem_typ_desc == 'RESIDENCE - HOUSE' %}selected{% endif %}>RESIDENCE - HOUSE</option>
            <option value="CHAIN STORE" {% if input_values.prem_typ_desc == 'CHAIN STORE' %}selected{% endif %}>CHAIN STORE</option>
             <option value="RESIDENCE - PUBLIC HOUSING" {% if input_values.prem_typ_desc == 'RESIDENCE - PUBLIC HOUSING' %}selected{% endif %}>RESIDENCE - PUBLIC HOUSING</option>
            </select>
        
        <label for="ofns_desc">Tipo de Crimen Reportado</label>
        <select name="ofns_desc">
             {% for crime in crime_types %}
                <option value="{{ crime }}" {% if input_values.ofns_desc == crime %}selected{% endif %}>{{ crime }}</option>
            {% endfor %}
        </select>

        <button type="submit">Predecir Probabilidad de Arresto</button>
    </form>

    {% if predictions %}
    <div class="results">
        <h2>Resultado:</h2>
        <p style="font-size: 1.5em; text-align: center;">
            <strong>{{ predictions[0].label }}</strong>: 
            <span style="font-weight: bold; color: #007bff;">{{ predictions[0].probability }}%</span>
        </p>
    </div>
    {% endif %}
</div>
{% endblock %}